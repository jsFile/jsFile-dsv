!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b(require("JsFile")):"function"==typeof define&&define.amd?define(["JsFile"],b):"object"==typeof exports?exports.JsFileDsv=b(require("JsFile")):a.JsFileDsv=b(a.JsFile)}(this,function(a){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(1),j=d(i),k=c(2),l=d(k),m=j["default"].Engine,n={extension:["csv"],mime:["text/csv"]},o={extension:["tsv","tab"],mime:["text/tab-separated-values"]},p={extension:[],mime:[]};[n,o].forEach(function(a){var b=a.extension,c=a.mime;p.extension.push.apply(p.extension,b),p.mime.push.apply(p.mime,c)});var q=function(a){function b(){e(this,b);var a=f(this,Object.getPrototypeOf(b).apply(this,arguments));return a.createDocument=l["default"],a.files=p,a}return g(b,a),h(b,[{key:"isCsv",value:function(){return Boolean(this.file&&m.validateFile(this.file,n))}},{key:"isTsv",value:function(){return Boolean(this.file&&m.validateFile(this.file,o))}}],[{key:"test",value:function(a){return Boolean(a&&m.validateFile(a,p))}}]),b}(m);q.mimeTypes=p.mime.slice(0),b["default"]=q},function(b,c){b.exports=a},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){a=a.substr(0,1048576);var b=a.split("\r"),c=b.length;if(1===c)return"\n";for(var d=0,e=0;c>e;e++)"\n"===b[e][0]&&d++;return d>=c/2?"\r\n":"\r"}function f(a){var b=this;return new Promise(function(c){var d=b.isTsv()?"tab":"comma",f=e(a),g=a.length,h=i.elementPrototype,k=i.elementPrototype,l=",",m=!1,n=!1,o=0,p=a[o],q=0,r=void 0,s=i.elementPrototype,t=i.elementPrototype,u=i.elementPrototype;for("tab"===d&&(l="	"),r=l.length,h.properties.tagName="TABLE",k.properties.tagName="TBODY",u.properties.tagName="TR",t.properties.tagName="TD",s.children.push(h),h.children.push(k),k.children.push(u),u.children.push(t);g>o;)"#"!==p||t.properties.textContent?p===f?(n||(u=i.elementPrototype,t=i.elementPrototype,u.properties.tagName="TR",t.properties.tagName="TD",u.children.push(t),k.children.push(u)),n=!1,q=0):n||(p===j?q++:q%2===0&&(p===l||p===l[0]&&a.substr(o,r)===l)?(t=i.elementPrototype,t.properties.tagName="TD",u.children.push(t),o+=r-1):(m=m||Boolean(p),t.properties.textContent+=p)):n=!0,o++,p=a[o];m||(k.children=[]),c(new i({meta:{name:b.fileName},content:[s],styles:[{selector:"table",properties:{borderCollapse:"collapse"}},{selector:"table td, table th",properties:{borderWidth:{value:1,unit:"pt"},borderStyle:"solid",borderColor:"#000000"}}]}))})}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=f;var g=c(1),h=d(g),i=h["default"].Document,j='"'}])});